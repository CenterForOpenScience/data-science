---
title: "Registration Report"
output: 
  flexdashboard::flex_dashboard:
    vertical_layout: scroll
    orientation: row
    theme: bootstrap
---

```{r setup, include=FALSE}
library(flexdashboard)
library(plotly)
library(tidyverse)
library(osfr)
library(highcharter)

##data imports

form_data <- read_csv('/Users/courtneysoderberg/form_type_monthly.csv')





```

Row {data-height=350}
-----------------------------------------------------------------------

### Chart 1

```{r}

```

Row {.tabset data-height=650}
-----------------------------------------------------------------------

### Number of Each Type

```{r}

top_forms <- form_data %>%
                group_by(name) %>%
                summarize(total_regs = sum(reg_events)) %>%
                arrange(desc(total_regs)) %>%
                pull(name)

n <- 5

form_data %>%
  group_by(name) %>%
  mutate(form = case_when(name %in% top_forms[1:n] ~ name, 
                              TRUE ~ "Other")) %>%
  ungroup() %>%
  group_by(date, form) %>%
  summarise(reg_events = sum(reg_events), retract_events = sum(retract_events), net_events = sum(net_events)) %>%
  hchart(., type = 'line',
         hcaes(x = date,
               y = net_events,
               group = form))
```

### Perc of Each Type
```{r}
form_data %>%
  group_by(name) %>%
  mutate(form = case_when(name %in% top_forms[1:n] ~ name, 
                              TRUE ~ "Other")) %>%
  ungroup() %>%
  group_by(date, form) %>%
  summarise(reg_events = sum(reg_events), retract_events = sum(retract_events), net_events = sum(net_events)) %>%
  hchart(., type = 'line',
         hcaes(x = date,
               y = net_events,
               group = form))
```

### Chart 2 Tab 3

```{r}

```
